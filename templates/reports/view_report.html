{% extends 'base.html' %}
{% load static %}

{% block title %}View Report - Guidance Counseling System{% endblock %}
{% block navigation %}{% endblock %}
{% block header_title %}View Report{% endblock %}

{% block content %}
<div class="flex h-screen bg-gray-50">
    {% include 'includes/sidebar.html' %}

    <div class="flex-1 flex flex-col ml-64">
        {% include 'includes/topbar.html' %}

        <main class="flex-1 overflow-y-auto p-8 bg-gray-50">
            <!-- Header -->
            <div class="mb-8">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">{{ report.name }}</h2>
                        <p class="mt-2 text-sm text-gray-600">Generated on {{ report.generated_at|date:"F j, Y" }}</p>
                    </div>
                    {% if download_url %}
                    <a href="{{ download_url }}" 
                       class="inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Download Report
                    </a>
                    {% endif %}
                </div>
            </div>

            <!-- Report Details -->
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-indigo-500 to-indigo-600">
                    <h2 class="text-lg font-medium text-white">Report Details</h2>
                </div>
                <div class="px-6 py-5">
                    <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Report Type</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900">{{ report.get_report_type_display }}</dd>
                        </div>
                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Format</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900">{{ report.get_format_display }}</dd>
                        </div>
                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Date Range</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900">
                                {% if report.start_date and report.end_date %}
                                    {{ report.start_date|date:"F j, Y" }} - {{ report.end_date|date:"F j, Y" }}
                                {% else %}
                                    Not specified
                                {% endif %}
                            </dd>
                        </div>
                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Generated By</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900">{{ report.generated_by.get_full_name }}</dd>
                        </div>
                    </dl>
                </div>
            </div>

            <!-- Actions -->
            <div class="mt-6 flex justify-end space-x-4">
                <a href="{% url 'reports_dashboard' %}" 
                   class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"/>
                    </svg>
                    Back to Reports
                </a>
                {% if download_url %}
                <a href="{{ download_url }}" 
                   class="inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                    Download Report
                </a>
                {% endif %}
            </div>
        </main>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .bg-gradient-to-r {
        background-size: 200% 200%;
        animation: gradient 15s ease infinite;
    }

    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
</style>
{% endblock %}